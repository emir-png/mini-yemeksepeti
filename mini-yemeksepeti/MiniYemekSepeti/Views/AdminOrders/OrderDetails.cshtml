@model List<OrderDetailsViewModel>

<!-- Container for the entire page content -->
<div class="container my-4">
    <!-- Page title -->
    <h2 class="text-center mb-4">Order Details</h2>

    <!-- Check if there are any order details in the model -->
    @if (Model != null && Model.Any())
    {
        <!-- Get the first order details from the model (since all orders are assumed to have similar structure) -->
        var firstDetail = Model.First();

        <!-- Sipariş Genel Bilgiler (Order Information) -->
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">Order Information</h5>
            </div>
            <div class="card-body">
                <!-- Display Order ID -->
                <p><strong>Order ID:</strong> @firstDetail.OrderId</p>
                <!-- Display Order Date -->
                <p><strong>Order Date:</strong> @firstDetail.OrderDate.ToString("dd MMM yyyy, HH:mm")</p>
                <!-- Display Order Status -->
                <p><strong>Status:</strong> @firstDetail.Status</p>
                <!-- Display Payment Status -->
                <p><strong>Payment Status:</strong> @firstDetail.PaymentStatus</p>
                <!-- Display Total Amount -->
                <p><strong>Total Amount:</strong> @firstDetail.TotalAmount.ToString("0.00") ₺</p>
            </div>
        </div>

        <!-- Müşteri Bilgileri (Customer Information) -->
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-secondary text-white">
                <h5 class="mb-0">Customer Information</h5>
            </div>
            <div class="card-body">
                <!-- Display Customer's Full Name -->
                <p><strong>Name:</strong> @firstDetail.CustomerFirstName @firstDetail.CustomerLastName</p>
                <!-- Display Customer's Email (with a mailto link) -->
                <p><strong>Email:</strong> <a href="mailto:@firstDetail.CustomerEmail">@firstDetail.CustomerEmail</a></p>
                <!-- Display Customer's Phone Number (with a tel link) -->
                <p><strong>Phone:</strong> <a href="tel:@firstDetail.CustomerPhone">@firstDetail.CustomerPhone</a></p>
            </div>
        </div>
    }

    <!-- Sipariş Öğeleri (Order Items) -->
    <div class="card shadow-sm">
        <div class="card-header bg-success text-white">
            <h5 class="mb-0">Order Items</h5>
        </div>
        <div class="card-body">
            <!-- Table to display the list of ordered items -->
            <table class="table table-striped table-hover">
                <thead class="table-dark">
                    <tr>
                        <th>Food Name</th> <!-- Name of the food item -->
                        <th class="text-center">Quantity</th> <!-- Quantity of food ordered -->
                        <th class="text-end">Price (₺)</th> <!-- Price per item -->
                        <th class="text-end">Total Amount (₺)</th> <!-- Total amount for each item -->
                    </tr>
                </thead>
                <tbody>
                    <!-- Loop through each item in the order and display its details -->
                    @foreach (var item in Model)
                    {
                        <tr>
                            <!-- Display Food Name -->
                            <td>@item.FoodName</td>
                            <!-- Display Item Quantity -->
                            <td class="text-center">@item.ItemQuantity</td>
                            <!-- Display Item Price -->
                            <td class="text-end">@item.ItemPrice.ToString("0.00") ₺</td>
                            <!-- Display Item Total Amount -->
                            <td class="text-end">@item.ItemTotalAmount.ToString("0.00") ₺</td>
                        </tr>
                    }
                </tbody>
                <!-- Table footer for the grand total -->
                <tfoot>
                    <tr>
                        <th colspan="3" class="text-end">Grand Total:</th> <!-- Total label -->
                        <!-- Sum up the total amount of all items and display it -->
                        <th class="text-end">@Model.Sum(m => m.ItemTotalAmount).ToString("0.00") ₺</th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>
